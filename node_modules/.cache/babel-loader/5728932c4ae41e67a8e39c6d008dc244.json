{"ast":null,"code":"import _regeneratorRuntime from\"/Users/shahafm/Desktop/devConnector/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/shahafm/Desktop/devConnector/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from'axios';import{setAlert}from'./alert';import{ADD_POST,DELETE_POST,GET_POSTS,GET_POST,POST_ERROR,UPDATE_LIKES,ADD_COMMENT,REMOVE_COMMENT}from'./types';//get posts\nexport var getPosts=function getPosts(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/api/posts');case 3:res=_context.sent;dispatch({type:GET_POSTS,payload:res.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:POST_ERROR,payload:{msg:_context.t0.response.statusText,status:_context.t0.response.status}});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var addLike=function addLike(id){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.put(\"/api/posts/like/\".concat(id));case 3:res=_context2.sent;dispatch({type:UPDATE_LIKES,payload:{id:id,likes:res.data}});_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);dispatch({type:POST_ERROR,payload:{msg:_context2.t0.response.statusText,status:_context2.t0.response.status}});case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var removeLike=function removeLike(id){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.put(\"/api/posts/unlike/\".concat(id));case 3:res=_context3.sent;dispatch({type:UPDATE_LIKES,payload:{id:id,likes:res.data}});_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);dispatch({type:POST_ERROR,payload:{msg:_context3.t0.response.statusText,status:_context3.t0.response.status}});case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var deletePost=function deletePost(id){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(dispatch){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.delete(\"/api/posts/\".concat(id));case 3:dispatch({type:DELETE_POST,payload:id});dispatch(setAlert('Post Removed','success'));_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);dispatch({type:POST_ERROR,payload:{msg:_context4.t0.response.statusText,status:_context4.t0.response.status}});case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export var addPost=function addPost(formData){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(dispatch){var config,res;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:config={headers:{'Content-Type':'application/json'}};_context5.prev=1;_context5.next=4;return axios.post('/api/posts',formData,config);case 4:res=_context5.sent;dispatch({type:ADD_POST,payload:res.data});dispatch(setAlert('Post Added','success'));_context5.next=12;break;case 9:_context5.prev=9;_context5.t0=_context5[\"catch\"](1);dispatch({type:POST_ERROR,payload:{msg:_context5.t0.response.statusText,status:_context5.t0.response.status}});case 12:case\"end\":return _context5.stop();}}},_callee5,null,[[1,9]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};export var getPost=function getPost(id){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(dispatch){var res;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return axios.get(\"/api/posts/\".concat(id));case 3:res=_context6.sent;dispatch({type:GET_POST,payload:res.data});_context6.next=10;break;case 7:_context6.prev=7;_context6.t0=_context6[\"catch\"](0);dispatch({type:POST_ERROR,payload:{msg:_context6.t0.response.statusText,status:_context6.t0.response.status}});case 10:case\"end\":return _context6.stop();}}},_callee6,null,[[0,7]]);}));return function(_x6){return _ref6.apply(this,arguments);};}();};export var addComment=function addComment(postId,formData){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(dispatch){var config,res;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:config={headers:{'Content-Type':'application/json'}};_context7.prev=1;_context7.next=4;return axios.post(\"/api/posts/comment/\".concat(postId),formData,config);case 4:res=_context7.sent;dispatch({type:ADD_COMMENT,payload:res.data});dispatch(setAlert('Comment Added','success'));_context7.next=12;break;case 9:_context7.prev=9;_context7.t0=_context7[\"catch\"](1);dispatch({type:POST_ERROR,payload:{msg:_context7.t0.response.statusText,status:_context7.t0.response.status}});case 12:case\"end\":return _context7.stop();}}},_callee7,null,[[1,9]]);}));return function(_x7){return _ref7.apply(this,arguments);};}();};export var deleteComment=function deleteComment(postId,commentId){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(dispatch){return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return axios.delete(\"/api/posts/comment/\".concat(postId,\"/\").concat(commentId));case 3:dispatch({type:REMOVE_COMMENT,payload:commentId});dispatch(setAlert('Comment Removed','success'));_context8.next=10;break;case 7:_context8.prev=7;_context8.t0=_context8[\"catch\"](0);dispatch({type:POST_ERROR,payload:{msg:_context8.t0.response.statusText,status:_context8.t0.response.status}});case 10:case\"end\":return _context8.stop();}}},_callee8,null,[[0,7]]);}));return function(_x8){return _ref8.apply(this,arguments);};}();};","map":{"version":3,"names":["axios","setAlert","ADD_POST","DELETE_POST","GET_POSTS","GET_POST","POST_ERROR","UPDATE_LIKES","ADD_COMMENT","REMOVE_COMMENT","getPosts","dispatch","get","res","type","payload","data","msg","response","statusText","status","addLike","id","put","likes","removeLike","deletePost","delete","addPost","formData","config","headers","post","getPost","addComment","postId","deleteComment","commentId"],"sources":["/Users/shahafm/Desktop/devConnector/client/src/actions/post.js"],"sourcesContent":["import axios from 'axios';\nimport { setAlert } from './alert';\nimport {\n  ADD_POST,\n  DELETE_POST,\n  GET_POSTS,\n  GET_POST,\n  POST_ERROR,\n  UPDATE_LIKES,\n  ADD_COMMENT,\n  REMOVE_COMMENT,\n} from './types';\n\n//get posts\n\nexport const getPosts = () => async (dispatch) => {\n  try {\n    const res = await axios.get('/api/posts');\n    dispatch({\n      type: GET_POSTS,\n      payload: res.data,\n    });\n  } catch (err) {\n    dispatch({\n      type: POST_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status,\n      },\n    });\n  }\n};\n\nexport const addLike = (id) => async (dispatch) => {\n  try {\n    const res = await axios.put(`/api/posts/like/${id}`);\n    dispatch({\n      type: UPDATE_LIKES,\n      payload: {\n        id,\n        likes: res.data,\n      },\n    });\n  } catch (err) {\n    dispatch({\n      type: POST_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status,\n      },\n    });\n  }\n};\n\nexport const removeLike = (id) => async (dispatch) => {\n  try {\n    const res = await axios.put(`/api/posts/unlike/${id}`);\n    dispatch({\n      type: UPDATE_LIKES,\n      payload: {\n        id,\n        likes: res.data,\n      },\n    });\n  } catch (err) {\n    dispatch({\n      type: POST_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status,\n      },\n    });\n  }\n};\n\nexport const deletePost = (id) => async (dispatch) => {\n  try {\n    await axios.delete(`/api/posts/${id}`);\n    dispatch({\n      type: DELETE_POST,\n      payload: id,\n    });\n    dispatch(setAlert('Post Removed', 'success'));\n  } catch (err) {\n    dispatch({\n      type: POST_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status,\n      },\n    });\n  }\n};\n\nexport const addPost = (formData) => async (dispatch) => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  };\n  try {\n    const res = await axios.post('/api/posts', formData, config);\n\n    dispatch({\n      type: ADD_POST,\n      payload: res.data,\n    });\n    dispatch(setAlert('Post Added', 'success'));\n  } catch (err) {\n    dispatch({\n      type: POST_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status,\n      },\n    });\n  }\n};\n\nexport const getPost = (id) => async (dispatch) => {\n  try {\n    const res = await axios.get(`/api/posts/${id}`);\n    dispatch({\n      type: GET_POST,\n      payload: res.data,\n    });\n  } catch (err) {\n    dispatch({\n      type: POST_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status,\n      },\n    });\n  }\n};\n\nexport const addComment = (postId, formData) => async (dispatch) => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  };\n  try {\n    const res = await axios.post(\n      `/api/posts/comment/${postId}`,\n      formData,\n      config\n    );\n\n    dispatch({\n      type: ADD_COMMENT,\n      payload: res.data,\n    });\n    dispatch(setAlert('Comment Added', 'success'));\n  } catch (err) {\n    dispatch({\n      type: POST_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status,\n      },\n    });\n  }\n};\n\nexport const deleteComment = (postId, commentId) => async (dispatch) => {\n  try {\n    await axios.delete(`/api/posts/comment/${postId}/${commentId}`);\n\n    dispatch({\n      type: REMOVE_COMMENT,\n      payload: commentId,\n    });\n    dispatch(setAlert('Comment Removed', 'success'));\n  } catch (err) {\n    dispatch({\n      type: POST_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status,\n      },\n    });\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}